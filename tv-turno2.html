<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Turno 2</title>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<style>
body {
  background: #020617;
  color: white;
  font-family: Arial;
  padding: 30px;
}

.header {
  display: flex;
  align-items: center;
  margin-bottom: 30px;
}

.back {
  background: #22c55e; 
  color: #022c22;
  border: none;
  padding: 10px 16px;
  border-radius: 8px;
  font-weight: bold;
  cursor: pointer;
}

h1 {
  flex: 1;
  text-align: center;
  font-size: 40px;
  margin: 0;
  transform: translateX(-40px);
}

.card {
  background: #111827;
  padding: 20px;
  border-radius: 10px;
  margin-bottom: 20px;
}

.logo {
  position: fixed;
  bottom: 20px;
  right: 20px;
  width: 140px;
}
</style>
</head>

<body>

<div class="header">
  <button class="back" onclick="location.href='tv-selector.html'">â¬… Volver</button>
  <h1>ğŸ• Turno 2</h1>
</div>

<div id="contenido"></div>

<img src="logo.png" class="logo">

<script>
const firebaseConfig = {
  apiKey: "AIzaSyA7sJENLFLBY_YyGxTkgg_SPsPc5k7d9M0",
  authDomain: "gestion-trabajo.firebaseapp.com",
  databaseURL: "https://gestion-trabajo-default-rtdb.firebaseio.com",
  projectId: "gestion-trabajo",
  storageBucket: "gestion-trabajo.firebasestorage.app",
  messagingSenderId: "415928237993",
  appId: "1:415928237993:web:7158adc8f77ff426c84eb8"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.database();

db.ref("turnos/turno2").on("value", snap => {
  const data = snap.val();
  const cont = document.getElementById("contenido");
  cont.innerHTML = "";

  if (!data) {
    cont.innerHTML = "<p>No hay datos</p>";
    return;
  }

  Object.values(data).forEach(a => {
    let productosHTML = "";

    if (a.productos && Array.isArray(a.productos)) {
      a.productos.forEach(p => {
        productosHTML += `<p>ğŸ“¦ ${p.nombre} â€” <b>${p.unidades}</b></p>`;
      });
    } else {
      productosHTML = "<p>ğŸ“¦ Sin productos</p>";
    }

    cont.innerHTML += `
      <div class="card">
        <h2>ğŸ›  ${a.maquina || "Sin mÃ¡quina"}</h2>
        ${productosHTML}
        <p>ğŸ‘¥ ${a.personas && a.personas.trim() !== "" ? a.personas : "Sin personal"}</p>
      </div>
    `;
  });
});
</script>

</body>
</html>
